pipeline {
    agent any
    stages {
        stage('SCM Checkout') {
            steps {
                git 'https://github.com/HariDEV-GIT/terra_test.git'
            }
	      }
	      stage('Terraform Code Clean') {
            steps {
                sh 'cd /var/lib/jenkins/workspace/test build'
     		        sh 'terraform fmt'
            }
        }
	      stage('Terraform Code Build') {
            steps {
                sh '''if [ $? -eq 0 ]; then
     	       		        echo "+++TERRAFORM CODE CLEANED+++"
     	     	          else
             		        echo "+++TERRAFORM CODE NOT CLEANED+++"
           	          fi'''
            }
       }
    }
}
